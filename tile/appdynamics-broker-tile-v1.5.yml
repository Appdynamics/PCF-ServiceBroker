---
name: appdynamics-broker                                       # [1]
product_version: 1.5                            # [1]
label: AppDynamics 
rank: 50
metadata_version: '1.5'                                    # [2]

icon_image: VBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAI4UlEQVR42u2d/0tXVxjH778T9EPQD0GjIBAEB0KgJEUUyYRAEBYbcxXFRhTFgkBoLIpVLLYWGJq1T1imVrOcomVzqHM5LJuWs0zRsu4O1SLLL/fec+6558vr4fWjpJ7Pq8dz7n3e9wYfVS8BUE7AEgBiAWIBYgEgFiAWIBYAYgFiAWIBIBYgFiAWAGIBYgFiASAWIBYgFgBiAWIBYgEgFiAWIBYAYgFiAWIBIBYgFiAWvOVAx+6iXB7rgFgqWX126fDkg9N9x1kKxFLJnrbKMAynX0wVXljFaiCWsnY1+HQgfFU0LcRSxo4bFeH/Nf7sSf65FawJYimgd6w7fKeOdlexJoglS2VLeTi7RNPKq13OyiCWFJ0P28IP6tCtvawMYiWnvHlTOFc9mhpZU7OM9UGshLSP3AznKZoWYiVk8+W14fw1+HRg9dmlrBJixabpfn24YO1pq2SVEEtlu3rbtFgoxIrH+YHqMEJVtpSzVogVlXUX82dezkQRq3esm+VCrKjU3j0TRi6aFmJFovDCqukXU9HFah+5yaIh1uKc7jsexqzy5k2sG2ItREHdyljtiqaFWJE42l0VJqrNl9eyeog1N/nnVow/e5JMrKb79SwgYs3N4TsHQ4miaSHWHKypWfZoakRGrPMD1SwjYr3PoVt7Q7maeTmz7mI+K4lYs+ISw5MPQumiaSHWLF6nu+SLfBhizWpXb9Nd8kU+DLHesKt1W6iuaFqI9Yb30l3yRT4MseZId8kXoVbEWtI12hGmUDQtr8WaL90lX+TDvBZrgXSXfHmeD/NXrNKG4jDN8rxp+SvWouku+drXvhOxSHepL59DrZ6Klfu7JtRS3oZafRQrerpLvrzNh/koVsQwqqryMx/mnVhx0100LcRKK90lXxVXtyAW7Up9eZgP80us7//4NsyofAu1eiSWTLpLvnzLh3kkVuIwqqryKh/mi1jy6S6aFmKlku5SUv7kwwLalc7yJx/mhViq0l3y5U+o1X2x1Ka7yIch1hu++u3z0KTyJB/mvljK0100LcRKJd0lX5PPJ5zPhwW0q0zK+XyYy2Kll+4i1Oq1WKmmu+Sr6vZ+xLKPrU0bQrPL7XyYs2JpSHcRavVOLD3pLvkamhh0NR/mplgN93KhJeVqPsxBsXSmuwi1eiSW5nSXfO24UYFYplOUy7OoXTmcD3NNrEzSXYRaHRcrq3SXfHU+bEMscznVeyy0thzLh7kjVrbpLkKtzoqVebpLvkobihHLLPJql1vdrtzLhzkiliHpLkKtTomlJ91VP3h+YLxfw3dBLFM42Pl1qh/22PTo9lcXx4XB4uCZ6gVYZ/Jh1ouVdrqr4V6uoG7lu9+xrLEk1dblRqjVerHSC6OK08Cu1m3znRXO/PlDek3LgXyY9WKl1K6uDV1Z+8uaRWfqhyYGyYc5KFZK7+7a0/Zl9Msc1X/9qPxncCDUardYytNd7SM3F21UH/LZr1uVvFL63TrZcwSxskF8nAo/yMnnE+J0KXNDSe0cmO35MIvFUpjuEv9UUS5Pietj06OqfiqrQ622iqUwjPrd74cUDgcX1K1sHb6u6vqZvfkwW8VS9eHV3P05jTkLVadFe/NhVoqlKt3V/7hHHOvS+AnLGkuUXKC3N9RqpVhKwqjiSJ/qHd/Dd75RYv+Bjt2IpYONlwpt+cCU/L22NB9mn1hKTvV6Jp8KL6xSMnZhY6jVMrGUhFHFzlrbJaJPr3+iZC+IWOlSe/eM/C3erU0bdP7MJ3uOeJgPs0ksJekusafWP9jT/W+Xb6FWm8SSD6OK3XQmG+GiXJ78SL74q4pYJrarsenRDEcGdrVu8yofZo1Y8umuzP/Hyw/YWBRqtUMs+TDqqd5jJoQ+xPlO5rdo+acZsQxqV2LvbMg1xo2XCiefT/iQD7NALMl0l/gglYzEqOJAx24fQq0WiCUZRp0vEJEh9YN1Mr/R+vqPESvjdiX2y2ZuGWXmaqzIh5ku1r72nQZOxchT2lCc+N6UFaFWo8WSCaNOv5gSO2WTfzuZuZqzRnZia8SSCaNaMcbU8k+zq/kwo8VKfNWn4V7OltsJiXeQhodazRUrcRhV51SMPBVXtyRuWib/muaKlSyMKja2ZY0ldg0CJJ6rMTkfZqhYicOo+qdilJxRukY7HAu1GipWsjBq6/B1S8NSiedqDt85iFjphlHFLtjqB2lsv1HhUj4scKZd2TUHp3CuxsxQq3FilTYUe/hsFpm5GtG0DMyHGSdWgjCqOVMxWc3VGJgPM0usssaSBCcjo6ZiMpmrMTDUGti+uzJwKiaTuRrTbmEFVh8Gq42/F6ttrsa042Fgb7syeSomk7kao46HgaXtyvypGP1zNUY1LVPEintn0NKH+6Q9V2POhXgjxIo7yGDLVIz+uRpz7h4G1rUru6ZilMzVxNpsGTLykL1YO+LcI7NxKkbzXI0hTStjseJOtds4FaNklTofttl1gytjsWJNtds7FaN5rsaEifjAlnZl+1SMPF/EOeJkPhGfpVixboqJPazPVsWdq8m8aWUmVqyIsxtTMUoWrSfyCTrbwHRmYkV/IkPXaIczUzE652qyDUwHhrcr96Zi5In+2IEMm1Y2YkV/3tXrt3xDsrka0bTW1xf4Ilb0x/O5OhUjT17t8ohzNVk9Tyswtl31P+6x96VqRs3VZPIQQN1iiTNwlL2n+Brnp2Lkqbq9P4pY14auuC9WxGe1ezIVo22uRv/jlgPN7SrKs9rFzhRjIlJQtzLK+Vr/M+K1ihXlxV2+TcVom6vRfOtCn1hRXtwlvkDsSXEljbkazW/jCYxqV35OxWibq9H5CjFNYkV5i7NFr12wdK5mYLxf280xTWItGpxnKkbPXI22ML4OsaJEu5iK0TNXI85Gei476xBr0SQqUzE652r05FoDDX/7xbZ9AU73nWAqRu1czcIL/lPfCV/iX+AeiAWIBYgFiMUqAGIBYgFiASAWIBYgFgBiAWIBYgEgFiAWIBYAYgFiAWIBIBYgFiAWAGIBYgFiASAWIBYgFgBiAWKBD/wHYhzhPLKGWZUAAAAASUVORK5CYII= 

serial: true
releases:                                                  # [5]
- name: appdynamics_broker
  version: '4.1.5.3'
  file: appdynamics_broker-4.1.5.3.tgz

# EDIT the stemcell version as required
stemcell_criteria:                                                  # [3]
  os: ubuntu-trusty
  version: '3026'
  requires_cpi: false

property_blueprints:
- name: encryption_key
  type: secret
- name: vm_credentials
  type: salted_credentials
  default:
    identity: vcap
- name: app_name
  type: string
  configurable: true
  default: AppDynamicsServiceBroker
- name: app_version
  type: string
  configurable: true
  default: v1
- name: app_uri
  type: string
  configurable: true
  default: appdynamics-service-broker
- name: machine_agent_app_name
  type: string
  configurable: true
  default: AppDynamicsPCFOpsMetrics
- name: machine_agent_app_version
  type: string
  configurable: true
  default: v1
- name: machine_agent_app_uri
  type: string
  configurable: true
  default: appdynamics-machine-agent
- name: ops_metrics_host
  type: string
  configurable: true
- name: ops_metrics_port
  type: integer
  configurable: true
- name: ops_metrics_authenticate
  type: boolean
  configurable: true
- name: ops_metrics_jmx_user
  type: string
  configurable: true
- name: ops_metrics_jmx_password
  type: secret
  configurable: true
- name: account_name
  type: string
  configurable: true
- name: account_access_key
  type: string
  configurable: true
- name: controller_host
  type: string
  configurable: true
- name: controller_port
  type: integer
  configurable: true
- name: tier_name
  type: string
  configurable: true
  default: 'MachineAgentTier'
- name: node_name
  type: string
  configurable: true
  default: 'MachineAgentNode'
- name: ssl_enabled
  type: boolean
  configurable: true
  default: true
- name: internal_service_names
  type: string
  configurable: false
  default: "appdynamics"
- name: create_open_security_group
  type: boolean
  configurable: true
  default: false
- name: enable_global_access_to_plans
  type: boolean
  configurable: true
  default: false
- name: org_quota
  type: integer
  configurable: false
  constraints:
    min: 512
    max: 1024
  default: 512
- name: memory
  type: integer
  configurable: false
  constraints:
    min: 256
    max: 1024
  default: 256
# This for any internal plans prebuilt into the service broker that needs to be registered with CF
### ON_DEMAND_PLAN_BEGIN_MARKER
- name: on_demand_service_plans_collection
  type: collection
  configurable: true
  property_blueprints:
  - name: guid
    type: uuid
    optional: false
    unique: true
  - name: plan_name
    type: string
    configurable: true
  - name: plan_description
    type: string
    configurable: true
  - name: account_name
    type: string
    configurable: true
  - name: account_access_key
    type: string
    configurable: true
  - name: controller_host
    type: string
    configurable: true
  - name: controller_port
    type: integer
    configurable: true
  - name: ssl_enabled
    type: boolean
    configurable: true
    default: true
form_types:
- property_inputs:
  - reference: ".properties.app_name"
    label: Service Broker Application Name
    description: Enter the name for the Service Broker App
#  - reference: ".properties.app_version"
#    label: Service Broker Application Version
#    description: Enter the version of the Service Broker App (Final app name would
#      include app version like ${appName}-${appversion}
  - reference: ".properties.app_uri"
    label: Service Broker Application URI
    description: Enter the uri/endpoint for the Service Broker app (on push to CF)
  - reference: ".properties.create_open_security_group"
    label: Open up Security Groups
    description: Open up security group on CF for Service Broker to access other apps
      or CF Cloud Controller
  - reference: ".properties.enable_global_access_to_plans"
    label: Enable Access of Brokered Services and Plans to Everyone
    description: Open up All Services and plans to everyone across all orgs and spaces
  - reference: ".properties.on_demand_service_plans_collection"
    label: Service Plans
    property_inputs:
    - reference: plan_name
      label: Plan Name
      description: "Name of Plan"
      slug: false
    - reference: plan_description
      label: Plan Description
      description: "Description of Plan"
      slug: false
    - reference: account_name
      label: Account Name
      description: "Account Name"
      slug: false
    - reference: account_access_key
      label: Account Access Key
      description: "Account Access Key"
      slug: false
    - reference: controller_host
      label: AppDynamics Controller Host Address/IP
      description: "AppDynamics Controller FQDN Address/IP"
      slug: false
    - reference: controller_port
      label: AppDynamics Controller Port
      description: "AppDynamics Controller Port"
      slug: false
    - reference: ssl_enabled
      label: AppDynamics Controller SSL Enabled
      description: "Is AppDynamics Controller SSL Enabled"
      slug: false
  name: appdynamics_broker_app
  label: Service Broker Application
  description: Service Broker Configuration
- property_inputs:
  - reference: ".properties.machine_agent_app_name"
    label: Application Name
    description: Enter the name for the Machine Agent Extension for PCF OPS Metrics
#  - reference: ".properties.machine_agent_app_version"
#    label: Application Version
#    description: Enter the version of the Machine Agent App (Final app name would
#      include app version like ${appName}-${appversion}
  - reference: ".properties.machine_agent_app_uri"
    label: Application URI
    description: Enter the uri/endpoint for the Machine Agent app (on push to CF)
  - reference: ".properties.create_open_security_group"
    label: Open up Security Groups
    description: Open up security group on CF for Service Broker to access other apps
      or CF Cloud Controller
  - reference: .properties.account_name
    label: Account Name
    description: "Account Name"
  - reference: .properties.account_access_key
    label: Account Access Key
    description: "Account Access Key"
  - reference: .properties.controller_host
    label: AppDynamics Controller Host Address/IP
    description: "AppDynamics Controller Host Address/IP"
  - reference: .properties.controller_port
    label: AppDynamics Controller Port
    description: "AppDynamics Controller Port"
  - reference: .properties.ssl_enabled
    label: AppDynamics Controller SSL Enabled
    description: "Is AppDynamics Controller SSL Enabled"
  - reference: .properties.ops_metrics_host
    label: Ops Metrics Host Address
    description: "PCF Ops Metrics Host Address"
  - reference: .properties.ops_metrics_port
    label: Ops Metrics Host Port
    description: "PCF Ops Metrics Host Port"
  - reference: .properties.ops_metrics_authenticate
    label: Ops Metrics JMX Authenticate
    description: "PCF Ops Metrics JMX login with Authentication"
  - reference: .properties.ops_metrics_jmx_user
    label: Ops Metrics JMX User Id
    description: "PCF Ops Metrics JMX User Id"
  - reference: .properties.ops_metrics_jmx_password
    label: Ops Metrics JMX User Password
    description: "PCF Ops Metrics JMX User Password"
  name: appdynamics_machine_agent_app
  label: Machine Agent Extension for PCF OPS Metrics
  description: Machine Agent Configuration
job_types:
- name: deploy-service-broker
  resource_label: Deploy AppDynamics Service Broker
  release: appdynamics_broker
  errand: true
  templates:
  - name: deploy-service-broker
    release: appdynamics_broker
  resource_definitions:
  - name: ram
    type: integer
    configurable: false
    default: 512
  - name: ephemeral_disk
    type: integer
    configurable: false
    default: 2048
  - name: persistent_disk
    type: integer
    configurable: false
    default: 0
  - name: cpu
    type: integer
    configurable: false
    default: 1
  static_ip: 0
  dynamic_ip: 1
  max_in_flight: 1
  instance_definitions:
  - name: instances
    type: integer
    configurable: false
    default: 1
  property_blueprints:
  - name: vm_credentials
    type: salted_credentials
    default:
      identity: vcap
  - name: broker_credentials
    type: salted_credentials

  manifest: |
    domain: (( ..cf.cloud_controller.system_domain.value ))
    app_domains:
      - (( ..cf.cloud_controller.apps_domain.value ))
    ssl:
      skip_cert_verify: (( ..cf.ha_proxy.skip_cert_verify.value ))
    uaa:
      url: https://uaa.(( ..cf.cloud_controller.system_domain.value ))
      clients:
        appdynamics_broker:
          secret: test
    appdynamics_broker:
      app_name: (( .properties.app_name.value ))
      app_version: (( .properties.app_version.value ))
      app_uri: (( .properties.app_uri.value ))
      create_open_security_group: (( .properties.create_open_security_group.value ))
      app_push:
        org_quota: (( .properties.org_quota.value ))
        timeout: 180
        memory: (( .properties.memory.value ))
      persistence_store_type: none
      on_demand_service_plans: (( .properties.on_demand_service_plans_collection.value ))
      encryption_key: (( .properties.encryption_key.value ))
      cf:
        admin_user: (( ..cf.uaa.system_services_credentials.identity ))
        admin_password: (( ..cf.uaa.system_services_credentials.password ))
      broker:
        user: (( .deploy-service-broker.broker_credentials.identity ))
        password: (( .deploy-service-broker.broker_credentials.password ))
        internal_service_names: (( .properties.internal_service_names.value ))

- name: deploy-machine-agent
  resource_label: Deploy AppDynamics Machine Agent
  release: appdynamics_broker
  errand: true
  templates:
  - name: deploy-machine-agent
    release: appdynamics_broker
  resource_definitions:
  - name: ram
    type: integer
    configurable: false
    default: 1024
  - name: ephemeral_disk
    type: integer
    configurable: false
    default: 2048
  - name: persistent_disk
    type: integer
    configurable: false
    default: 0
  - name: cpu
    type: integer
    configurable: false
    default: 1
  static_ip: 0
  dynamic_ip: 1
  max_in_flight: 1
  instance_definitions:
  - name: instances
    type: integer
    configurable: false
    default: 1
  property_blueprints:
  - name: vm_credentials
    type: salted_credentials
    default:
      identity: vcap
  - name: broker_credentials
    type: salted_credentials

  manifest: |
    domain: (( ..cf.cloud_controller.system_domain.value ))
    app_domains:
      - (( ..cf.cloud_controller.apps_domain.value ))
    ssl:
      skip_cert_verify: (( ..cf.ha_proxy.skip_cert_verify.value ))
    uaa:
      url: https://uaa.(( ..cf.cloud_controller.system_domain.value ))
      clients:
        appdynamics_broker:
          secret: test
    appdynamics_machine_agent:
      app_name: (( .properties.machine_agent_app_name.value ))
      app_version: (( .properties.machine_agent_app_version.value ))
      app_uri: (( .properties.machine_agent_app_uri.value ))
      app_push:
        org_quota: (( .properties.org_quota.value ))
        timeout: 180
        memory: (( .properties.memory.value ))
      encryption_key: (( .properties.encryption_key.value ))
      create_open_security_group: (( .properties.create_open_security_group.value ))
      account_name: (( .properties.account_name.value ))
      account_access_key: (( .properties.account_access_key.value ))
      controller_host: (( .properties.controller_host.value ))
      controller_port: (( .properties.controller_port.value ))
      ssl_enabled: (( .properties.ssl_enabled.value ))
      tier_name: (( .properties.tier_name.value ))
      node_name: (( .properties.node_name.value ))
      ops_metrics_host: (( .properties.ops_metrics_host.value ))
      ops_metrics_port: (( .properties.ops_metrics_port.value ))
      ops_metrics_authenticate: (( .properties.ops_metrics_authenticate.value ))
      ops_metrics_jmx_user: (( .properties.ops_metrics_jmx_user.value ))
      ops_metrics_jmx_password: (( .properties.ops_metrics_jmx_password.value ))
      cf:
        admin_user: (( ..cf.uaa.system_services_credentials.identity ))
        admin_password: (( ..cf.uaa.system_services_credentials.password ))
      broker:
        user: (( .deploy-machine-agent.broker_credentials.identity ))
        password: (( .deploy-machine-agent.broker_credentials.password ))

- name: register-broker
  resource_label: Register AppDynamics Service Broker
  templates:
  - name: register-broker
    release: appdynamics_broker
  errand: true
  resource_definitions:
  - name: ram
    type: integer
    configurable: false
    default: 1024
  - name: ephemeral_disk
    type: integer
    configurable: false
    default: 2048
  - name: persistent_disk
    type: integer
    configurable: false
    default: 0
  - name: cpu
    type: integer
    configurable: false
    default: 1
  static_ip: 0
  dynamic_ip: 1
  max_in_flight: 1
  instance_definitions:
  - name: instances
    type: integer
    configurable: false
    default: 1
  property_blueprints:
  - name: vm_credentials
    type: salted_credentials
    default:
      identity: vcap

  manifest: |
    domain: (( ..cf.cloud_controller.system_domain.value ))
    app_domains:
      - (( ..cf.cloud_controller.apps_domain.value ))
    ssl:
      skip_cert_verify: (( ..cf.ha_proxy.skip_cert_verify.value ))
    uaa:
      url: https://uaa.(( ..cf.cloud_controller.system_domain.value ))
      clients:
        appdynamics_broker:
          secret: test
    appdynamics_broker:
      app_name: (( .properties.app_name.value ))
      app_version: (( .properties.app_version.value ))
      app_uri: (( .properties.app_uri.value ))
      encryption_key: (( .properties.encryption_key.value ))
      enable_global_access_to_plans: (( .properties.enable_global_access_to_plans.value ))
      cf:
        admin_user: (( ..cf.uaa.system_services_credentials.identity ))
        admin_password: (( ..cf.uaa.system_services_credentials.password ))
      broker:
        user: (( .deploy-service-broker.broker_credentials.identity ))
        password: (( .deploy-service-broker.broker_credentials.password ))
        internal_service_names: (( .properties.internal_service_names.value ))

- name: destroy-broker
  resource_label: Remove AppDynamics Service Broker
  templates:
  - name: destroy-broker
    release: appdynamics_broker
  errand: true
  resource_definitions:
  - name: ram
    type: integer
    configurable: false
    default: 1024
  - name: ephemeral_disk
    type: integer
    configurable: false
    default: 1024
  - name: persistent_disk
    type: integer
    configurable: false
    default: 0
  - name: cpu
    type: integer
    configurable: false
    default: 1
  static_ip: 0
  dynamic_ip: 1
  max_in_flight: 1
  instance_definitions:
  - name: instances
    type: integer
    configurable: false
    default: 1
  property_blueprints:
  - name: vm_credentials
    type: salted_credentials
    default:
      identity: vcap

  manifest: |
    domain: (( ..cf.cloud_controller.system_domain.value ))
    app_domains:
      - (( ..cf.cloud_controller.apps_domain.value ))
    ssl:
      skip_cert_verify: (( ..cf.ha_proxy.skip_cert_verify.value ))
    uaa:
      url: https://uaa.(( ..cf.cloud_controller.system_domain.value ))
      clients:
        appdynamics_broker:
          secret: test
    appdynamics_broker:
      app_name: (( .properties.app_name.value ))
      app_version: (( .properties.app_version.value ))
      app_uri: (( .properties.app_uri.value ))
      encryption_key: (( .properties.encryption_key.value ))
      cf:
        admin_user: (( ..cf.uaa.system_services_credentials.identity ))
        admin_password: (( ..cf.uaa.system_services_credentials.password ))
      broker:
        user: (( .deploy-service-broker.broker_credentials.identity ))
        password: (( .deploy-service-broker.broker_credentials.password ))
        internal_service_names: (( .properties.internal_service_names.value ))

- name: destroy-machine-agent
  resource_label: Remove AppDynamics Machine Agent
  templates:
  - name: destroy-machine-agent
    release: appdynamics_broker
  errand: true
  resource_definitions:
  - name: ram
    type: integer
    configurable: false
    default: 1024
  - name: ephemeral_disk
    type: integer
    configurable: false
    default: 1024
  - name: persistent_disk
    type: integer
    configurable: false
    default: 0
  - name: cpu
    type: integer
    configurable: false
    default: 1
  static_ip: 0
  dynamic_ip: 1
  max_in_flight: 1
  instance_definitions:
  - name: instances
    type: integer
    configurable: false
    default: 1
  property_blueprints:
  - name: vm_credentials
    type: salted_credentials
    default:
      identity: vcap

  manifest: |
    domain: (( ..cf.cloud_controller.system_domain.value ))
    app_domains:
      - (( ..cf.cloud_controller.apps_domain.value ))
    ssl:
      skip_cert_verify: (( ..cf.ha_proxy.skip_cert_verify.value ))
    uaa:
      url: https://uaa.(( ..cf.cloud_controller.system_domain.value ))
      clients:
        appdynamics_broker:
          secret: test
    appdynamics_machine_agent:
      app_name: (( .properties.machine_agent_app_name.value ))
      app_version: (( .properties.machine_agent_app_version.value ))
      app_uri: (( .properties.machine_agent_app_uri.value ))
      encryption_key: (( .properties.encryption_key.value ))
      cf:
        admin_user: (( ..cf.uaa.system_services_credentials.identity ))
        admin_password: (( ..cf.uaa.system_services_credentials.password ))
      broker:
        user: (( .deploy-machine-agent.broker_credentials.identity ))
        password: (( .deploy-machine-agent.broker_credentials.password ))

- name: compilation
  resource_label: compilation
  resource_definitions:
   - name: ram
     type: integer
     configurable: true
     default: 1024
   - name: ephemeral_disk
     type: integer
     configurable: true
     default: 1024
   - name: persistent_disk
     type: integer
     configurable: true
     default: 0
   - name: cpu
     type: integer
     configurable: true
     default: 2

  static_ip: 0
  dynamic_ip: 1
  max_in_flight: 1

  instance_definitions:
    - name: instances
      type: integer
      default: 1

update:
  canaries: 1
  canary_watch_time: 60000-240000
  max_in_flight: 1
  update_watch_time: 60000-240000

requires_product_versions:
- name: cf
  version: "~> 1.3"
provides_product_versions:
- name: appdynamics_broker
  version: '4.1.5.3'
post_deploy_errands:
- name: deploy-service-broker
- name: deploy-machine-agent
- name: register-broker
pre_delete_errands:
- name: destroy-broker
- name: destroy-machine-agent


